{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tebie\\\\Documents\\\\fantasix-draft\\\\frontend v2\\\\src\\\\components\\\\Draft.js\",\n  _s = $RefreshSig$();\n// src/components/Draft.js\n\nimport React, { useState, useEffect } from 'react';\nimport PlayerCard from './ui/PlayerCard'; // Importa el componente PlayerCard\nimport ParticipantCard from './ui/ParticipantCard';\nimport { useFantasy } from '../context/FantasyContext';\nimport './../styles/global.scss';\nimport './../styles/draft.scss';\nimport api from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DraftScreen() {\n  _s();\n  const {\n    players,\n    setPlayers,\n    participants,\n    setParticipants,\n    teams,\n    setTeams\n  } = useFantasy();\n  const [selectedParticipant, setSelectedParticipant] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Función para manejar el pick\n  const handlePick = async playerId => {\n    if (!selectedParticipant) return;\n    try {\n      const participant = participants.find(p => p.id === selectedParticipant);\n      if (!participant) {\n        alert('No participant selected');\n        return;\n      }\n      if (participant.picks.length >= 5) {\n        alert('El participante ya tiene 5 jugadores seleccionados');\n        return;\n      }\n      const newPickOrder = participant.picks.length + 1;\n\n      // Guardar la selección en la base de datos antes de actualizar el estado local\n      await api.pickPlayer(selectedParticipant, playerId, newPickOrder);\n\n      // Actualiza el estado en el frontend para reflejar la selección\n      setPlayers(players.map(p => p.id === playerId ? {\n        ...p,\n        selected: true,\n        selectedBy: selectedParticipant\n      } : p));\n      setParticipants(participants.map(p => p.id === selectedParticipant ? {\n        ...p,\n        picks: [...p.picks, {\n          playerId,\n          pickOrder: newPickOrder\n        }]\n      } : p));\n    } catch (error) {\n      console.error(\"Error selecting player:\", error);\n      alert('Error selecting player. Please try again or check the server logs.');\n    }\n  };\n\n  // Renderiza los jugadores\n  const renderPlayers = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"players-container\",\n      children: players.map(player => /*#__PURE__*/_jsxDEV(PlayerCard, {\n        player: player,\n        onPick: handlePick // Pasa `handlePick` al componente hijo PlayerCard\n      }, player.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Renderiza la pantalla de draft\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"draft-screen\",\n    children: renderPlayers()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(DraftScreen, \"KWXK8Kitx5Zh28z/aJ7HDpxr6lY=\", false, function () {\n  return [useFantasy];\n});\n_c = DraftScreen;\nvar _c;\n$RefreshReg$(_c, \"DraftScreen\");","map":{"version":3,"names":["React","useState","useEffect","PlayerCard","ParticipantCard","useFantasy","api","jsxDEV","_jsxDEV","DraftScreen","_s","players","setPlayers","participants","setParticipants","teams","setTeams","selectedParticipant","setSelectedParticipant","loading","setLoading","error","setError","handlePick","playerId","participant","find","p","id","alert","picks","length","newPickOrder","pickPlayer","map","selected","selectedBy","pickOrder","console","renderPlayers","className","children","player","onPick","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/tebie/Documents/fantasix-draft/frontend v2/src/components/Draft.js"],"sourcesContent":["// src/components/Draft.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport PlayerCard from './ui/PlayerCard'; // Importa el componente PlayerCard\r\nimport ParticipantCard from './ui/ParticipantCard';\r\nimport { useFantasy } from '../context/FantasyContext';\r\nimport './../styles/global.scss';\r\nimport './../styles/draft.scss';\r\nimport api from '../services/api';\r\n\r\nexport default function DraftScreen() {\r\n  const { players, setPlayers, participants, setParticipants, teams, setTeams } = useFantasy();\r\n  const [selectedParticipant, setSelectedParticipant] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Función para manejar el pick\r\n  const handlePick = async (playerId) => {\r\n    if (!selectedParticipant) return;\r\n\r\n    try {\r\n      const participant = participants.find(p => p.id === selectedParticipant);\r\n      if (!participant) {\r\n        alert('No participant selected');\r\n        return;\r\n      }\r\n\r\n      if (participant.picks.length >= 5) {\r\n        alert('El participante ya tiene 5 jugadores seleccionados');\r\n        return;\r\n      }\r\n\r\n      const newPickOrder = participant.picks.length + 1;\r\n\r\n      // Guardar la selección en la base de datos antes de actualizar el estado local\r\n      await api.pickPlayer(selectedParticipant, playerId, newPickOrder);\r\n\r\n      // Actualiza el estado en el frontend para reflejar la selección\r\n      setPlayers(players.map(p => p.id === playerId ? { ...p, selected: true, selectedBy: selectedParticipant } : p));\r\n      setParticipants(participants.map(p => p.id === selectedParticipant ? { ...p, picks: [...p.picks, { playerId, pickOrder: newPickOrder }] } : p));\r\n\r\n    } catch (error) {\r\n      console.error(\"Error selecting player:\", error);\r\n      alert('Error selecting player. Please try again or check the server logs.');\r\n    }\r\n  };\r\n\r\n  // Renderiza los jugadores\r\n  const renderPlayers = () => {\r\n    return (\r\n      <div className=\"players-container\">\r\n        {players.map((player) => (\r\n          <PlayerCard\r\n            key={player.id}\r\n            player={player}\r\n            onPick={handlePick} // Pasa `handlePick` al componente hijo PlayerCard\r\n          />\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Renderiza la pantalla de draft\r\n  return (\r\n    <div className=\"draft-screen\">\r\n      {/* Otros elementos de la UI */}\r\n      {renderPlayers()}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}